<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Checkout – SS Store</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      /* --- Basic Reset --- */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      :root {
        --bg: #f5f7fb;
        --card-bg: #ffffff;
        --accent: #2563eb;
        --accent-soft: #e0ebff;
        --text-main: #111827;
        --text-muted: #6b7280;
        --border: #e5e7eb;
        --radius-lg: 12px;
        --shadow-soft: 0 12px 30px rgba(15, 23, 42, 0.12);
      }

      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: radial-gradient(
          circle at top left,
          #e0e7ff 0,
          #f5f7fb 40%,
          #f9fafb 100%
        );
        color: var(--text-main);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }

      .checkout-wrapper {
        width: 100%;
        max-width: 1040px;
        background: linear-gradient(135deg, #f9fafb, #edf2ff);
        padding: 1px; /* border trick */
        border-radius: 20px;
        box-shadow: var(--shadow-soft);
      }

      .checkout-inner {
        background: var(--card-bg);
        border-radius: 20px;
        padding: 24px;
        display: grid;
        grid-template-columns: 2fr 1.3fr;
        gap: 24px;
      }

      @media (max-width: 900px) {
        .checkout-inner {
          grid-template-columns: 1fr;
        }
      }

      .checkout-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 18px;
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .brand-logo img {
        height: 50px;
      }

      .brand-text {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .brand-name {
        font-weight: 600;
        letter-spacing: 0.03em;
        font-size: 14px;
        text-transform: uppercase;
      }

      .brand-subtitle {
        font-size: 12px;
        color: var(--text-muted);
      }

      .secure-tag {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: 12px;
        padding: 6px 10px;
        border-radius: 999px;
        background: #ecfdf5;
        color: #15803d;
        border: 1px solid #bbf7d0;
      }

      .lock-icon img {
        height: 20px;
      }

      /* Left column: form */
      .left-col h2 {
        font-size: 22px;
        margin-bottom: 4px;
      }

      .left-col p {
        font-size: 13px;
        color: var(--text-muted);
        margin-bottom: 16px;
      }

      .section-title {
        font-weight: 600;
        font-size: 14px;
        margin-bottom: 10px;
      }

      .two-col {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 12px;
      }

      @media (max-width: 600px) {
        .two-col {
          grid-template-columns: 1fr;
        }
      }

      .form-group {
        margin-bottom: 12px;
      }

      label {
        display: block;
        font-size: 12px;
        font-weight: 500;
        margin-bottom: 4px;
        color: #4b5563;
      }

      .required-dot {
        color: #dc2626;
        margin-left: 2px;
      }

      .input-error {
        border-color: #dc2626;
        background-color: #fff5f5;
      }
      input,
      select {
        width: 100%;
        padding: 10px 11px;
        border-radius: 9px;
        border: 1px solid var(--border);
        outline: none;
        font-size: 13px;
        transition: border-color 0.15s ease, box-shadow 0.15s ease,
          background 0.15s ease;
        background: #f9fafb;
      }

      input:focus,
      select:focus {
        border-color: var(--accent);
        box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.25);
        background: #ffffff;
      }

      .input-inline {
        display: flex;
        gap: 10px;
      }

      .hint {
        font-size: 11px;
        color: var(--text-muted);
        margin-top: 4px;
      }

      .checkbox-row {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 14px;
        font-size: 12px;
        color: var(--text-muted);
      }

      .checkbox-row input[type="checkbox"] {
        width: 15px;
        height: 15px;
        padding: 0;
      }

      .error-message {
        font-size: 12px;
        color: #b91c1c;
        margin-top: 4px;
        display: none;
      }

      /* Right column: order summary */
      .summary-card {
        background: radial-gradient(circle at top, #eff6ff 0, #ffffff 36%);
        border-radius: 16px;
        border: 1px solid #e0e7ff;
        padding: 18px 18px 16px;
      }

      .summary-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .summary-header h3 {
        font-size: 15px;
      }

      .edit-cart {
        font-size: 12px;
        color: var(--accent);
        text-decoration: none;
      }

      .edit-cart:hover {
        text-decoration: underline;
      }

      .summary-items {
        border-radius: 12px;
        padding: 10px;
        background: rgba(248, 250, 252, 0.9);
        margin-bottom: 10px;
      }

      .summary-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 13px;
        padding: 6px 0;
      }

      .summary-item + .summary-item {
        border-top: 1px dashed #e5e7eb;
      }

      .item-info {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .item-name {
        font-weight: 500;
      }

      .item-meta {
        font-size: 11px;
        color: var(--text-muted);
      }

      .item-price {
        font-weight: 500;
      }

      .summary-line {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 13px;
        padding: 4px 0;
        color: var(--text-muted);
      }

      .summary-total {
        margin-top: 6px;
        padding-top: 8px;
        border-top: 1px solid #e5e7eb;
        display: flex;
        justify-content: space-between;
        align-items: baseline;
      }

      .summary-total .label {
        font-size: 13px;
        font-weight: 600;
      }

      .summary-total .value {
        font-size: 18px;
        font-weight: 700;
      }

      .badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 11px;
        padding: 4px 8px;
        border-radius: 999px;
        background: var(--accent-soft);
        color: #1d4ed8;
        margin-top: 4px;
      }

      .pay-button {
        width: 100%;
        margin-top: 14px;
        padding: 11px 14px;
        border-radius: 999px;
        border: none;
        font-size: 14px;
        font-weight: 600;
        background: linear-gradient(135deg, #2563eb, #1d4ed8);
        color: #ffffff;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        box-shadow: 0 10px 22px rgba(37, 99, 235, 0.35);
        transition: transform 0.12s ease, box-shadow 0.12s ease,
          filter 0.12s ease;
      }

      .pay-button span {
        font-size: 16px;
      }

      .pay-button:hover {
        transform: translateY(-1px);
        filter: brightness(1.03);
        box-shadow: 0 14px 26px rgba(37, 99, 235, 0.4);
      }

      .pay-button:active {
        transform: translateY(0);
        box-shadow: 0 8px 16px rgba(37, 99, 235, 0.3);
      }

      .note {
        margin-top: 10px;
        font-size: 11px;
        color: var(--text-muted);
        text-align: center;
      }

      .note strong {
        font-weight: 600;
      }

      .success-banner {
        margin-top: 12px;
        padding: 10px 12px;
        border-radius: 10px;
        background: #ecfdf5;
        border: 1px solid #bbf7d0;
        font-size: 12px;
        color: #166534;
        display: none;
      }
    </style>
  </head>

  <body>
    <div class="checkout-wrapper">
      <div class="checkout-inner">
        <!-- LEFT: Billing + Payment -->
        <div class="left-col">
          <div class="checkout-header">
            <div class="brand">
              <div class="brand-logo">
                <img
                  src="https://res.cloudinary.com/dilr4t8mt/image/upload/v1763378718/Untitled_design_2_wyxpvf.png"
                  alt="Logo"
                />
              </div>
              <div class="brand-text">
                <span class="brand-name">SS Store</span>
                <span class="brand-subtitle">Smooth & secure checkout</span>
              </div>
            </div>
            <div class="secure-tag">
              <span class="lock-icon"
                ><img src="../assets/icons/secure.svg" alt="Secure"
              /></span>
              <span>Secure Payment</span>
            </div>
          </div>

          <h2>Checkout</h2>
          <p>Enter your details to complete your purchase.</p>

          <!-- Billing details -->
          <div class="section">
            <div class="section-title">Billing details</div>

            <form id="checkout-form" novalidate>
              <div class="two-col">
                <div class="form-group">
                  <label for="firstName"
                    >First name <span class="required-dot">*</span></label
                  >
                  <input type="text" id="firstName" name="firstName" required />
                  <div class="error-message" data-for="firstName">
                    First name is required.
                  </div>
                </div>

                <div class="form-group">
                  <label for="lastName"
                    >Last name <span class="required-dot">*</span></label
                  >
                  <input type="text" id="lastName" name="lastName" required />
                  <div class="error-message" data-for="lastName">
                    Last name is required.
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="email"
                  >Email address <span class="required-dot">*</span></label
                >
                <input type="email" id="email" name="email" required />
                <div class="error-message" data-for="email">
                  Enter a valid email address.
                </div>
              </div>

              <div class="form-group">
                <label for="phone"
                  >Phone number <span class="required-dot">*</span></label
                >
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  placeholder="+91 98765 43210"
                  required
                />
                <div class="error-message" data-for="phone">
                  Phone number is required.
                </div>
              </div>

              <div class="form-group">
                <label for="address"
                  >Address <span class="required-dot">*</span></label
                >
                <input
                  type="text"
                  id="address"
                  name="address"
                  placeholder="House / Street / Locality"
                  required
                />
                <div class="error-message" data-for="address">
                  Address is required.
                </div>
              </div>

              <div class="two-col">
                <div class="form-group">
                  <label for="city"
                    >City <span class="required-dot">*</span></label
                  >
                  <input type="text" id="city" name="city" required />
                  <div class="error-message" data-for="city">
                    City is required.
                  </div>
                </div>

                <div class="form-group">
                  <label for="pincode"
                    >Pincode <span class="required-dot">*</span></label
                  >
                  <input
                    type="text"
                    id="pincode"
                    name="pincode"
                    maxlength="6"
                    required
                  />
                  <div class="error-message" data-for="pincode">
                    Enter a valid pincode.
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="country">Country / Region</label>
                <select id="country" name="country">
                  <option value="IN">India</option>
                  <option value="US">United States</option>
                  <option value="GB">United Kingdom</option>
                  <option value="CA">Canada</option>
                  <option value="OTHER">Other</option>
                </select>
              </div>

              <div class="checkbox-row">
                <input type="checkbox" id="saveDetails" />
                <label for="saveDetails"
                  >Save details for faster checkout next time</label
                >
              </div>

              <!-- Payment section -->
              <div class="section-title">Payment</div>

              <div class="form-group">
                <label for="cardName"
                  >Name on card <span class="required-dot">*</span></label
                >
                <input type="text" id="cardName" name="cardName" required />
                <div class="error-message" data-for="cardName">
                  Name on card is required.
                </div>
              </div>

              <div class="form-group">
                <label for="cardNumber"
                  >Card number <span class="required-dot">*</span></label
                >
                <input
                  type="text"
                  id="cardNumber"
                  name="cardNumber"
                  maxlength="19"
                  placeholder="1234 5678 9012 3456"
                  required
                />
                <div class="error-message" data-for="cardNumber">
                  Enter a valid card number.
                </div>
                <div class="hint">
                  We accept Visa, Mastercard, RuPay and more.
                </div>
              </div>

              <div class="two-col">
                <div class="form-group">
                  <label for="expiry"
                    >Expiry (MM/YY) <span class="required-dot">*</span></label
                  >
                  <input
                    type="text"
                    id="expiry"
                    name="expiry"
                    maxlength="5"
                    placeholder="12/28"
                    required
                  />
                  <div class="error-message" data-for="expiry">
                    Enter a valid expiry date.
                  </div>
                </div>

                <div class="form-group">
                  <label for="cvv"
                    >CVV <span class="required-dot">*</span></label
                  >
                  <input
                    type="password"
                    id="cvv"
                    name="cvv"
                    maxlength="4"
                    required
                  />
                  <div class="error-message" data-for="cvv">
                    CVV is required.
                  </div>
                </div>
              </div>

              <div class="hint">
                Your card details are encrypted and never stored on our servers.
              </div>

              <div class="success-banner" id="successBanner">
                Payment successful! Your order has been placed. A confirmation
                email has been sent.
              </div>
            </form>
          </div>
        </div>

        <!-- RIGHT: Order Summary -->
        <aside class="right-col">
          <div class="summary-card">
            <div class="summary-header">
              <div>
                <h3>Order summary</h3>
                <div class="badge">Arrives in 3–5 business days</div>
              </div>
              <a href="../cart.html" class="edit-cart">Edit cart</a>
            </div>

            <div class="summary-line">
              <span>Subtotal</span>
              <span class="sub-total">₹1,998</span>
            </div>
            <div class="summary-line">
              <span>Shipping</span>
              <span class="shipping">Free</span>
            </div>
            <div class="summary-line">
              <span>Taxes</span>
              <span class="tax">$0.90</span>
            </div>

            <div class="summary-total">
              <span class="label">Total</span>
              <span class="total">₹1,998</span>
            </div>

            <button class="pay-button" id="payNowBtn" type="button">
              <span>Pay now</span> →
            </button>

            <p class="note">
              By clicking <strong>Pay now</strong>, you agree to our Terms &amp;
              Conditions and Privacy Policy.
            </p>
          </div>
        </aside>
      </div>
    </div>

    <script>
      const form = document.getElementById("checkout-form");
      const payNowBtn = document.getElementById("payNowBtn");
      const successBanner = document.getElementById("successBanner");

      /**********************************************************/

      // Show error message
      function showError(inputId, message) {
        const input = document.getElementById(inputId);
        const errorEl = document.querySelector(
          `.error-message[data-for="${inputId}"]`
        );
        if (!errorEl) return;
        errorEl.textContent = message;
        errorEl.style.display = "block"; //It's hidden by default
        input.classList.add("input-error");
        input.style.borderColor = "#dc2626";
      }

      /**********************************************************/

      //Clear all errors
      function clearErrors() {
        document.querySelectorAll(".error-message").forEach((el) => {
          el.style.display = "none";
        });
        document.querySelectorAll("input").forEach((input) => {
          input.classList.remove("input-error");
          input.style.borderColor = "var(--border)";
        });
      }

      /**********************************************************/

      function validateForm() {
        clearErrors();
        let isValid = true;

        const requiredFields = [
          "firstName",
          "lastName",
          "email",
          "phone",
          "address",
          "city",
          "pincode",
          "cardName",
          "cardNumber",
          "expiry",
          "cvv",
        ];

        requiredFields.forEach((id) => {
          const field = document.getElementById(id);
          if (!field.value.trim()) {
            showError(id, "This field is required.");
            isValid = false;
          }
        });

        const email = document.getElementById("email").value.trim();
        if (!email) {
          showError("email", "Enter a valid email address.");
          isValid = false;
        }
        /**
         ^ - Start of string
         \d{16} - exactly 16 digits
         $ - end of string
         * */
        const pincode = document.getElementById("pincode").value.trim();
        if (pincode && !/^\d{6}$/.test(pincode)) {
          showError("pincode", "Pincode must be 6 digits.");
          isValid = false;
        }

        const cardNumber = document
          .getElementById("cardNumber")
          .value.replace(/\s+/g, "");
        if (cardNumber && !/^\d{16}$/.test(cardNumber)) {
          showError("cardNumber", "Card number must be 16 digits.");
          isValid = false;
        }

        const expiry = document.getElementById("expiry").value.trim();
        if (!expiry) {
          showError("expiry", "Use MM/YY format.");
          isValid = false;
        }

        const cvv = document.getElementById("cvv").value.trim();
        if (cvv && !/^\d{3,4}$/.test(cvv)) {
          showError("cvv", "CVV must be 3–4 digits.");
          isValid = false;
        }

        return isValid;
      }

      /************************************************************/

      // Auto-format

      // Card number

      document.getElementById("cardNumber").addEventListener("input", (e) => {
        //not more than 16 characters
        let value = e.target.value.replace(/\D/g, "").slice(0, 16);

        // Formatting it {1,4} take 4 characters when possible.
        const groups = value.match(/.{1,4}/g) || [];

        e.target.value = groups.join(" ");
      });

      //////////////////////////////////////////////////////////

      //   Expiry Date
      document.getElementById("expiry").addEventListener("input", (e) => {
        // not more than 4 chars
        let value = e.target.value.replace(/\D/g, "").slice(0, 4);

        // Formatting it
        const groups = value.match(/.{1,2}/g) || [];

        e.target.value = groups.join("/");
      });

      /************************************************************/

      function calculateOrderSummary() {
        const subTotal = document.querySelector(".sub-total");
        const shipping = document.querySelector(".shipping");
        const tax = document.querySelector(".tax");
        const subTotalPrice = Number(localStorage.getItem("SubTotal")).toFixed(
          2
        );
        const total = document.querySelector(".total");
        subTotal.innerHTML = `$${subTotalPrice}`;

        shipping.innerHTML = subTotalPrice < 99 ? `$${5}.00` : "Free";
        total.innerHTML = `$${(
          Number(subTotalPrice) +
          Number(subTotalPrice < 99 ? 5 : 0) +
          0.9
        ).toFixed(2)}`;
        localStorage.setItem("Total", total.innerHTML);
      }
      calculateOrderSummary();

      /************************************************************/

      // Handle Pay Now click
      payNowBtn.addEventListener("click", () => {
        if (!validateForm()) {
          successBanner.style.display = "none";
          return;
        }
        payNowBtn.disabled = true;
        payNowBtn.textContent = "Processing...";

        setTimeout(() => {
          successBanner.style.display = "block";
          payNowBtn.disabled = false;
          payNowBtn.textContent = "Pay now →";

          window.location.href = "orderSuccess.html";
        }, 200);
      });
    </script>
  </body>
</html>
